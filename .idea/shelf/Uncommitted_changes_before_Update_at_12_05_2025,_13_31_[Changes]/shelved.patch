Index: app/build.gradle.kts
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>plugins {\n    alias(libs.plugins.android.application)\n}\n\nandroid {\n    namespace = \"org.beginningandroid.interactivetest\"\n    compileSdk = 35\n\n    defaultConfig {\n        applicationId = \"org.beginningandroid.interactivetest\"\n        minSdk = 24\n        targetSdk = 35\n        versionCode = 1\n        versionName = \"1.0\"\n\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = false\n            proguardFiles(\n                getDefaultProguardFile(\"proguard-android-optimize.txt\"),\n                \"proguard-rules.pro\"\n            )\n        }\n    }\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_11\n        targetCompatibility = JavaVersion.VERSION_11\n    }\n}\n\ndependencies {\n\n    implementation(libs.appcompat)\n    implementation(libs.material)\n    implementation(libs.activity)\n    implementation(libs.constraintlayout)\n    testImplementation(libs.junit)\n    androidTestImplementation(libs.ext.junit)\n    androidTestImplementation(libs.espresso.core)\n    implementation(libs.osmdroid)\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/build.gradle.kts b/app/build.gradle.kts
--- a/app/build.gradle.kts	(revision 57440b0d0fa581eb22f04b18b13f5b63509e754e)
+++ b/app/build.gradle.kts	(date 1747049418594)
@@ -32,7 +32,7 @@
 }
 
 dependencies {
-
+    implementation("com.google.mlkit:text-recognition:16.0.1")
     implementation(libs.appcompat)
     implementation(libs.material)
     implementation(libs.activity)
Index: app/src/main/java/org/beginningandroid/interactivetest/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package org.beginningandroid.interactivetest;\n\nimport android.os.Bundle;\n//Bruges til at lave en Android Activity\nimport androidx.appcompat.app.AppCompatActivity;\n//Bruges til at danne vores OSM kort bibliotek\nimport org.osmdroid.config.Configuration;\n//Indholder forskellige kort layouts\nimport org.osmdroid.tileprovider.tilesource.TileSourceFactory;\n//Klasse til at h√•ndtere geopoint (tilf√∏je punkter til kortet)\nimport org.osmdroid.util.GeoPoint;\n//Klasse til at fremvise kortet i appen\nimport org.osmdroid.views.MapView;\n//Klasse til at tilf√∏je mark√∏rer til kortet\nimport org.osmdroid.views.overlay.Marker;\nimport android.content.Intent;\n\n//Definerer vores hoved aktivitet\npublic class MainActivity extends AppCompatActivity {\n\n//deklarer et kort objekt\n    private MapView map;\n    @Override\n    //onCreate se lifecycle for app activities!\n    protected void onCreate(Bundle savedInstanceState) {\n        //Kalder vores superklasse\n        super.onCreate(savedInstanceState);\n        //Indl√¶ser layout filen fra res/layout/activity_main.xml\n        setContentView(R.layout.activity_main);\n\n        // Konfigurer osmdroid (OpenStreetMap biblioteket)\n        Configuration.getInstance().setUserAgentValue(NOTIFICATION_SERVICE);\n\n        // Initialiser kortet\n        map = findViewById(R.id.map); //Finder kortet i layout filen (fra activity_main.xml), gennem ID\n        map.setTileSource(TileSourceFactory.MAPNIK); // S√¶tter layout til Standard OpenStreetMap layout\n        map.setMultiTouchControls(true); // Aktiver zoom og panorering, gennem multitouch\n\n        //  S√¶t kortets startposition til K√∏benhavn\n        GeoPoint startPoint = new GeoPoint(55.6761, 12.5683);\n        //Kan √¶ndre zoom i starten\n        map.getController().setZoom(15.0);\n        //S√¶tter centrum p√• startpunktet\n        map.getController().setCenter(startPoint);\n\n        //Test, pr√∏ver at tilf√∏je flere mark√∏rer/punkter til kortet\n        GeoPoint supermarket1 = new GeoPoint(55.6760, 12.5680);\n\n        // Tilf√∏j et mark√∏r til kortet\n        Marker marker = new Marker(map);\n        marker.setPosition(startPoint);\n        marker.setTitle(\"K√∏benhavn\");\n        marker.setAnchor(Marker.ANCHOR_CENTER, Marker.ANCHOR_BOTTOM);\n        map.getOverlays().add(marker);\n\n        Marker marker2 = new Marker(map);\n        marker2.setPosition(supermarket1);\n        marker2.setTitle(\"Aarhus\");\n        marker2.setAnchor(Marker.ANCHOR_CENTER, Marker.ANCHOR_BOTTOM);\n        map.getOverlays().add(marker2);\n\n\n        // G√∏r K√∏benhavn-mark√∏ren interaktiv\n        marker.setOnMarkerClickListener(new Marker.OnMarkerClickListener() {\n            @Override\n            public boolean onMarkerClick(Marker marker, MapView mapView) {\n                Intent intent = new Intent(MainActivity.this, MarkerDetailActivity.class);\n                intent.putExtra(\"location_name\", \"K√∏benhavn\");\n                startActivity(intent);\n                return true; // Returnerer true for at indikere, at vi h√•ndterer klik-handlingen\n            }\n        });\n\n        marker2.setOnMarkerClickListener(new Marker.OnMarkerClickListener() {\n            @Override\n            public boolean onMarkerClick(Marker marker, MapView mapView) {\n                Intent intent = new Intent(MainActivity.this, MarkerDetailActivity.class);\n                intent.putExtra(\"location_name\", \"Aarhus\");\n                startActivity(intent);\n                return true;\n            }\n        });\n\n\n    }\n\n}\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/org/beginningandroid/interactivetest/MainActivity.java b/app/src/main/java/org/beginningandroid/interactivetest/MainActivity.java
--- a/app/src/main/java/org/beginningandroid/interactivetest/MainActivity.java	(revision 57440b0d0fa581eb22f04b18b13f5b63509e754e)
+++ b/app/src/main/java/org/beginningandroid/interactivetest/MainActivity.java	(date 1747049442228)
@@ -1,8 +1,34 @@
 package org.beginningandroid.interactivetest;
 
+import static androidx.core.content.ContextCompat.startActivity;
+
+
+import android.app.Activity;
+import android.content.Intent;
+import android.graphics.Bitmap;
 import android.os.Bundle;
-//Bruges til at lave en Android Activity
+import android.provider.MediaStore;
+import android.widget.Button;
+import android.widget.ImageView;
+import android.widget.TextView;
+import android.view.View;
+import android.widget.Toast;
+import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
+
+import com.google.mlkit.vision.common.InputImage;
+import com.google.mlkit.vision.text.TextRecognition;
+import com.google.mlkit.vision.text.TextRecognizer;
+import com.google.mlkit.vision.text.latin.TextRecognizerOptions;
+import com.google.mlkit.vision.text.Text;
+
+import java.text.SimpleDateFormat;
+import java.util.Date;
+import java.util.Locale;
+import java.util.regex.*;
+//Bruges til at lave en Android Activity
+import androidx.activity.result.ActivityResult;
+import androidx.activity.result.ActivityResultLauncher;
 //Bruges til at danne vores OSM kort bibliotek
 import org.osmdroid.config.Configuration;
 //Indholder forskellige kort layouts
@@ -13,13 +39,102 @@
 import org.osmdroid.views.MapView;
 //Klasse til at tilf√∏je mark√∏rer til kortet
 import org.osmdroid.views.overlay.Marker;
-import android.content.Intent;
 
 //Definerer vores hoved aktivitet
 public class MainActivity extends AppCompatActivity {
+ private static final int REQUEST_CODE = 22;
+ Button btnScan, btnHistory;
+    ImageView imageView;
+    TextView resultText;
+    ReceiptDatabaseHelper dbHelper;
+
+ //   Button bntpicture;
+    @Override
+    protected void onCreate(Bundle savedInstanceState){
+        super.onCreate(savedInstanceState);
+        setContentView(R.layout.activity_main);
+
+        btnScan = findViewById(R.id.btnscanner_id);
+        btnHistory = findViewById(R.id.btn_history);
+        imageView = findViewById(R.id.imageview1);
+        resultText = findViewById(R.id.result_text);
+        dbHelper = new ReceiptDatabaseHelper(this);
+
+        btnScan.setOnClickListener(v -> {
+            Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
+            startActivityForResult(cameraIntent,REQUEST_CODE);
+        });
+
+        btnHistory.setOnClickListener(v -> {
+            Intent intent = new Intent(MainActivity.this,HistoryActivity.class);
+            startActivity(intent);
+        });
+       // bntpicture = findViewById(R.id.btnscanner_id);
+
+       /* bntpicture.setOnClickListener(new View.OnClickListener() {
+            @Override
+            public void onClick(View v) {
+                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
+                startActivityForResult(cameraIntent,REQUEST_CODE);
+
+            }
+        });*/
+    }
+
+
+    @Override
+    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
+        if (requestCode==REQUEST_CODE && resultCode == RESULT_OK && data!=null)
+        {
+            Bitmap photo  = (Bitmap) data.getExtras().get("data");
+            imageView.setImageBitmap(photo);
+            scanTextFromImage(photo);
+        }
+        else {
+            Toast.makeText(this,"Cancelled",Toast.LENGTH_SHORT).show();
+        }
+            super.onActivityResult(requestCode, resultCode, data);
+    }
+    private void scanTextFromImage(Bitmap bitmap){
+        InputImage image = InputImage.fromBitmap(bitmap,0);
+        TextRecognizer recognizer = TextRecognition.getClient(TextRecognizerOptions.DEFAULT_OPTIONS);
+
+        recognizer.process(image).addOnSuccessListener(visionText->{
+            String rawText = visionText.getText();
+            parseAndSavePantbon(rawText);
+        }).addOnFailureListener(e -> {
+            Toast.makeText(this,"Fejl i scanning",Toast.LENGTH_SHORT).show();
+        });
+    }
+    private void parseAndSavePantbon(String rawText){
+        Pattern totalPattern = Pattern.compile("(?m)^\\s*(\\d{1,4}[.,]\\d{2})\\s*$");
+        Matcher totalMatcher = totalPattern.matcher(rawText);
+
+        String total = "Ukendt";
+        while (totalMatcher.find()){
+            total = totalMatcher.group(1).replace(",",".");
+        }
+        Pattern bottlePattern = Pattern.compile("(\\d+)\\s+Flasker?\\s+√†\\s+(\\d+[.,]\\d{2})");
+        Matcher bottleMatcher = bottlePattern.matcher(rawText);
+        StringBuilder bottleSummary = new StringBuilder();
+        while (bottleMatcher.find()){
+            bottleSummary.append(bottleMatcher.group(1)).append("x").append(bottleMatcher.group(2).replace(",",".")).append("\n");
+        }
+        Pattern datePattern = Pattern.compile("(\\d{2}:\\d{2})\\s+(\\d{2}-[A-Z]{3}-\\d{4})");
+        Matcher dateMatcher = datePattern.matcher(rawText);
+        String time = "Ukendt", date = "Ukendt";
+        if (dateMatcher.find()){
+            time = dateMatcher.group(1);
+            time = dateMatcher.group(2);
+        }
+        dbHelper.insertReceipt(total,date,bottleSummary.toString());
+
+        resultText.setText("Dato:"+date+"\nTid:"+time+"\nTotal:"+total+"\n\nFlasker:\n"+bottleSummary);
+    }
+}
 
 //deklarer et kort objekt
-    private MapView map;
+ /*   private MapView map;
     @Override
     //onCreate se lifecycle for app activities!
     protected void onCreate(Bundle savedInstanceState) {
@@ -84,5 +199,5 @@
 
     }
 
-}
+}*/
 
Index: app/src/main/res/layout/activity_main.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\">\n\n    <!-- \uD83D\uDDFA\uFE0F OSM Kort -->\n    <org.osmdroid.views.MapView\n        android:id=\"@+id/map\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"/>\n\n</RelativeLayout>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml
--- a/app/src/main/res/layout/activity_main.xml	(revision 57440b0d0fa581eb22f04b18b13f5b63509e754e)
+++ b/app/src/main/res/layout/activity_main.xml	(date 1747049445176)
@@ -1,12 +1,33 @@
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
-    android:layout_height="match_parent">
+    android:layout_height="match_parent"
+    android:layout_margin="5dp"
+    >
 
-    <!-- üó∫Ô∏è OSM Kort -->
-    <org.osmdroid.views.MapView
-        android:id="@+id/map"
+    <TextView
+        android:id="@+id/text"
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:textSize="25dp"
+        android:text="Klik p√• scanner"
+        />
+
+    <Button
+        android:id="@+id/btnscanner_id"
         android:layout_width="match_parent"
-        android:layout_height="match_parent"/>
+        android:layout_height="wrap_content"
+        android:layout_below="@+id/text"
+        android:textSize="25dp"
+        android:text="Scan pantbon"
+        android:layout_centerHorizontal="true"
+        />
 
+    <ImageView
+        android:id="@+id/imageview1"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:layout_below="@+id/btnscanner_id"
+        />
+    
 </RelativeLayout>
Index: app/src/main/java/org/beginningandroid/interactivetest/ReceiptDatabaseHelper.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/org/beginningandroid/interactivetest/ReceiptDatabaseHelper.java b/app/src/main/java/org/beginningandroid/interactivetest/ReceiptDatabaseHelper.java
new file mode 100644
--- /dev/null	(date 1747049445190)
+++ b/app/src/main/java/org/beginningandroid/interactivetest/ReceiptDatabaseHelper.java	(date 1747049445190)
@@ -0,0 +1,20 @@
+package org.beginningandroid.interactivetest;
+
+import android.content.Context;
+import android.database.sqlite.SQLiteDatabase;
+import android.database.sqlite.SQLiteOpenHelper;
+import android.content.ContentValues;
+import android.database.Cursor;
+public class ReceiptDatabaseHelper extends SQLiteOpenHelper{
+    private static final String DATABASE_NAME = "recepits.db";
+    private static final int DATABASE_VERSION = 1;
+
+    public static final String TABLE_NAME = "pantbon";
+    public static final String COLUMN_ID = "_id";
+    public static final String COLUMN_TOTAL = "total";
+    public static final String COLUMN_DATE = "date";
+    public static final String COLUMN_TIME = "time";
+    public static final String COLUMN_BOTTLES = "bottles";
+
+    private static final String TABLE_CREATE = "CREATE TABLE"+TABLE_NAME+"("+COLUMN_ID+"INTEGER PRIMARY KEY AUTOINCREMENT,"+ COLUMN_TOTAL+"TEXT,"+COLUMN_DATE+"TEXT,"+COLUMN_TIME
+}
